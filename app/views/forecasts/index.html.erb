<%= content_for(:bars) do %>
  <%= render 'shared/tabs' %>
  <%= render 'shared/timeslottabs' %>
<% end %>

<%= cl_image_tag("wave_grey",
      width: 400, height: 300, crop: :fill) %>

<% @forecasts.each do |forecast| %>
  <%= render 'shared/card', forecast: forecast %>
  <!--<%= link_to "Add to My sessions", mysessions_create_path(forecast.id), method: :post %>
  <%= link_to "Remove from My sessions", mysessions_destroy_path(forecast.id), method: :delete %>-->
<% end %>

<script>
  function showCardsForDay(day=null){
    document.querySelectorAll(".card").forEach(function(obj) {
      obj.style.display="none";
    });

    let jsday
    if (day==null)
      jsday = new Date().toJSON().slice(0,10)
    else
      jsday = new Date(day).toJSON().slice(0,10)

    /*document.querySelectorAll(`[data-day='${jsday}'][data-time='11']`).forEach(function(obj) {
      obj.style.display="block";
    });*/
    showCardsForHour('11');
  }

  function showCardsForHour(hour){
    day = document.querySelector(".active").getAttribute('data-day');

    document.querySelectorAll(".card").forEach(function(obj) {
      obj.style.display="none";
    });

    document.querySelectorAll(`[data-day='${day}'][data-time='${hour}']`).forEach(function(obj) {
      obj.style.display="block";
    });
  }

  showCardsForDay();

</script>
