<!-- TODO: pluralize-->
<div class="page-separator">
 <h4 class="text-center">Preferences</h4>
</div>

<div class="settings-slider-container">
    <%= image_tag "icons/wind_grey.svg", class: "preferences-icon"%>
  <h4 class="text-center">
    <span id="minWindSpan"><%= wind_min %></span> to
    <span id="maxWindSpan"><%= wind_max %></span> knots
  </h4>
  <div class="slider-container">
    <input id="wind-slider" type="text" class="slider" value="" data-slider-min="0" data-slider-max="40" data-slider-step="1" data-slider-value="[<%= wind_min %>,<%= wind_max %>]"/>
  </div>

  <%= image_tag "icons/wave_grey.svg", class: "preferences-icon" %>
  <h4 class="text-center">
    <span id="minWaveSpan"> <%= waves_min %> </span> to
    <span id="maxWaveSpan"> <%= waves_max %> </span> meters
  </h4>
  <div class="slider-container">
    <input id="wave-slider" type="text" class="slider" value="" data-slider-min="0" data-slider-max="5" data-slider-step="0.5" data-slider-value="[<%= waves_min %>,<%= waves_max %>]"/>
  </div>
  <%= simple_form_for([ current_user ], :url => change_users_path, :method => :patch, remote: true, html: { class: "hidden"}) do |form| %>
    <%= form.input :pref_wind_speed_min %>
    <%= form.input :pref_wind_speed_max %>
    <%= form.input :pref_wave_height_min %>
    <%= form.input :pref_wave_height_max %>
    <%= form.button :submit, id: "trigger_user_patch" %>
  <% end %>
</div>

<div class="page-separator spots-separator">
 <h4 class="text-center">My Spots</h4>
</div>

<div class="container-center-elements">
  <div class='card-wrapper'>
   <% current_user.spots.each do |spot| %>
     <div class='row'>
        <div class='col-xs-12 col-sm-4'>
          <div class="beach-card">
            <div class="beach-info">
              <h3><%= spot.name %></h3>
              <p><%= spot.country %></p>
            </div>
            <div class="beach-actions">
              <%= link_to favorite_spot_path(spot), method: :delete do %>
                 <i class="fas fa-minus-circle"> </i>
              <% end %>
            </div>
        </div>
      </div>
    </div>
  <% end %>
  </div>
</div>

<div class="page-separator spots-separator">
  <h4 class="text-center">Add a new Spot</h4>
</div>

<div class="container-center-elements">
  <div class='card-wrapper'>
    <div class="new-beach-card">
      <div class="form">
      <%= simple_form_for [@favorite_spot] do |f| %>
        <%= f.association :spot, collection: Spot.order('name ASC'),
                          prompt: "Select a Spot",
                          label: false
        %>
        <div class="container-center-elements">
          <%= f.submit "Add", class: "btn btn-primary" %>
        </div>
      <% end %>
      </div>
   </div>
  </div>
</div>



<div
  id="map"
  style="width: 100%vh;
  height: 600px;"
  data-markers="<%= @markers.to_json %>"
></div>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyACQXoMu8JSgbht0Ewuc7yXe5rEqQ8FIig&callback=myMap"></script>

